{#
 # Page: Documents
 #
 # @package WordPress
 # @subpackage WebLexProDashboard
 #}

{% extends 'index.html.twig' %}

{% block content %}
	{{ parent() }}

	{%- if user.meta( 'documents' ).bills or user.meta( 'documents' ).contracts -%}
		<div class="container lg:text-3xl">
			<div class="row">

				<div
					class="space-y-4"
					data-module-accordion
				>
					{%- if user.meta( 'documents' ).bills -%}

						{% set id = 'bills-' ~ uniqid() %}

						<div
							class="js-accordion-panel"
							data-accordion-open="false"
							data-accordion-deselect="true"
						>
							<button
								class="js-accordion-header lg:text-2xl font-medium border border-gray-very-dark p-4 lg:px-8 flex w-full justify-between items-center"
								type="button"
								aria-expanded="false"
								aria-controls="{{ id }}"
								id="{{ id }}-header"
							>
								{{- _n( 'Bill', 'Bills', user.meta( 'documents' ).bills | length, 'weblexpro-dashboard' ) -}}
								{{- icon( 'chevron-right', { classes: [ 'w-5 h-3' ] } ) -}}
							</button>

							<div
								id="{{ id }}"
								class="lg:text-2xl"
								role="region"
							>
								<div class="js-accordion-inner mx-6 lg:mx-10 pt-6">
									<div class="border-l border-gray-very-dark">
										{% for document in user.meta( 'documents' ).bills %}
											<a
												class="flex items-center gap-x-8 hover:underline"
												href="{{ document.file.url }}"
												download
											>
												<hr class="w-10 h-0.5 bg-gray-very-dark">{{ document.title | default( document.file.title ) }}
											</a>
										{% endfor %}
									</div>
								</div>
							</div>
						</div>
					{% endif %}

					{%- if user.meta( 'documents' ).contracts -%}

						{% set id = 'contracts-' ~ uniqid() %}

						<div
							class="js-accordion-panel"
							data-accordion-open="false"
							data-accordion-deselect="true"
						>
							<button
								class="js-accordion-header lg:text-2xl font-medium border border-gray-very-dark p-4 lg:px-9 flex w-full justify-between items-center"
								type="button"
								aria-expanded="false"
								aria-controls="{{ id }}"
								id="{{ id }}-header"
							>
								{{- _n( 'Contract', 'Contracts', user.meta( 'documents' ).contracts | length, 'weblexpro-dashboard' ) -}}
								{{- icon( 'chevron-right', { classes: [ 'w-5 h-3' ] } ) -}}
							</button>

							<div
								id="{{ id }}"
								class="lg:text-3xl"
								role="region"
							>
								<div class="js-accordion-inner mx-6 lg:mx-10 pt-6">
									<div class="border-l border-gray-very-dark">
										{% for document in user.meta( 'documents' ).contracts %}
											<a
												class="flex items-center gap-x-8 hover:underline"
												href="{{ document.file.url }}"
												download
											>
												<hr class="w-10 h-0.5 bg-gray-very-dark">{{ document.title | default( document.file.title ) }}
											</a>
										{% endfor %}
									</div>
								</div>
							</div>
						</div>
					{% endif %}
				</div>

			</div>
		</div>
	{%- else -%}
		<div class="container lg:text-2xl text-blue-dark font-bold">
			<div class="row">
				<div>
					{{- __( 'No documents to display yet.', 'weblexpro-dashboard' ) -}}
				</div>
			</div>
		</div>
	{%- endif -%}
{% endblock %}
